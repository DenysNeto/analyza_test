<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
        <link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>

    <title>Document</title>
</head>
<body>



    <script>


let instrument = "NQ"
let input = {
        "results": {
            "NQ": [
                {
                    "profit": -4.428159733317751,
                    "orders": 45,
                    "barsCloseReversal": 0,
                    "cciLength": 0,
                    "cciValue": 0,
                    "barsClose": 0,
                    "barsIgnore": 0,
                    "barsIgnoreClose": 0,
                    "profitPercantage": 0,
                    "orderCall": "Both"
                },
                {
                    "profit": -90.77306612577735,
                    "orders": 45,
                    "barsCloseReversal": 1,
                    "cciLength": 0,
                    "cciValue": 0,
                    "barsClose": 0,
                    "barsIgnore": 0,
                    "barsIgnoreClose": 0,
                    "profitPercantage": 0,
                    "orderCall": "Both"
                },
                {
                    "profit": -56.18676850042954,
                    "orders": 45,
                    "barsCloseReversal": 2,
                    "cciLength": 0,
                    "cciValue": 0,
                    "barsClose": 0,
                    "barsIgnore": 0,
                    "barsIgnoreClose": 0,
                    "profitPercantage": 0,
                    "orderCall": "Both"
                },
                {
                    "profit": -37.007925623788196,
                    "orders": 45,
                    "barsCloseReversal": 3,
                    "cciLength": 0,
                    "cciValue": 0,
                    "barsClose": 0,
                    "barsIgnore": 0,
                    "barsIgnoreClose": 0,
                    "profitPercantage": 0,
                    "orderCall": "Both"
                },
                {
                    "profit": -23.22579611252475,
                    "orders": 45,
                    "barsCloseReversal": 4,
                    "cciLength": 0,
                    "cciValue": 0,
                    "barsClose": 0,
                    "barsIgnore": 0,
                    "barsIgnoreClose": 0,
                    "profitPercantage": 0,
                    "orderCall": "Both"
                }
            ]
        },
        "partialResult": {
            "NQ": [
                {
                    "id": 1,
                    "result": {
                        "profit": 101.63937096867477,
                        "orders": 7,
                        "barsCloseReversal": 0,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                },
                {
                    "id": 2,
                    "result": {
                        "profit": -207.31204788756693,
                        "orders": 8,
                        "barsCloseReversal": 0,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                },
                {
                    "id": 3,
                    "result": {
                        "profit": 28.49377133805301,
                        "orders": 6,
                        "barsCloseReversal": 0,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                },
                {
                    "id": 4,
                    "result": {
                        "profit": -62.27031420522076,
                        "orders": 8,
                        "barsCloseReversal": 0,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                },
                {
                    "id": 5,
                    "result": {
                        "profit": -14.140161070775292,
                        "orders": 4,
                        "barsCloseReversal": 0,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                },
                {
                    "id": 6,
                    "result": {
                        "profit": 22.02193518283894,
                        "orders": 7,
                        "barsCloseReversal": 0,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                },
                {
                    "id": 1,
                    "result": {
                        "profit": 74.01703710494496,
                        "orders": 7,
                        "barsCloseReversal": 1,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                },
                {
                    "id": 2,
                    "result": {
                        "profit": -207.31204788756693,
                        "orders": 8,
                        "barsCloseReversal": 1,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                },
                {
                    "id": 3,
                    "result": {
                        "profit": 26.25108010857764,
                        "orders": 6,
                        "barsCloseReversal": 1,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                },
                {
                    "id": 4,
                    "result": {
                        "profit": 26.28722948186469,
                        "orders": 8,
                        "barsCloseReversal": 1,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                },
                {
                    "id": 5,
                    "result": {
                        "profit": -14.140161070775292,
                        "orders": 4,
                        "barsCloseReversal": 1,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                },
                {
                    "id": 6,
                    "result": {
                        "profit": -13.778051026755954,
                        "orders": 7,
                        "barsCloseReversal": 1,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                },
                {
                    "id": 1,
                    "result": {
                        "profit": 90.3580164909961,
                        "orders": 7,
                        "barsCloseReversal": 2,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                },
                {
                    "id": 2,
                    "result": {
                        "profit": -207.31204788756693,
                        "orders": 8,
                        "barsCloseReversal": 2,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                },
                {
                    "id": 3,
                    "result": {
                        "profit": 26.25108010857764,
                        "orders": 6,
                        "barsCloseReversal": 2,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                },
                {
                    "id": 4,
                    "result": {
                        "profit": -15.598624412881435,
                        "orders": 8,
                        "barsCloseReversal": 2,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                },
                {
                    "id": 5,
                    "result": {
                        "profit": -14.140161070775292,
                        "orders": 4,
                        "barsCloseReversal": 2,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                },
                {
                    "id": 6,
                    "result": {
                        "profit": 4.467267212540733,
                        "orders": 7,
                        "barsCloseReversal": 2,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                },
                {
                    "id": 1,
                    "result": {
                        "profit": 90.3580164909961,
                        "orders": 7,
                        "barsCloseReversal": 3,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                },
                {
                    "id": 2,
                    "result": {
                        "profit": -207.31204788756693,
                        "orders": 8,
                        "barsCloseReversal": 3,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                },
                {
                    "id": 3,
                    "result": {
                        "profit": 28.49377133805301,
                        "orders": 6,
                        "barsCloseReversal": 3,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                },
                {
                    "id": 4,
                    "result": {
                        "profit": -64.35230604896404,
                        "orders": 8,
                        "barsCloseReversal": 3,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                },
                {
                    "id": 5,
                    "result": {
                        "profit": -14.140161070775292,
                        "orders": 4,
                        "barsCloseReversal": 3,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                },
                {
                    "id": 6,
                    "result": {
                        "profit": 19.521160149254154,
                        "orders": 7,
                        "barsCloseReversal": 3,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                },
                {
                    "id": 1,
                    "result": {
                        "profit": 101.63937096867477,
                        "orders": 7,
                        "barsCloseReversal": 4,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                },
                {
                    "id": 2,
                    "result": {
                        "profit": -207.31204788756693,
                        "orders": 8,
                        "barsCloseReversal": 4,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                },
                {
                    "id": 3,
                    "result": {
                        "profit": 28.49377133805301,
                        "orders": 6,
                        "barsCloseReversal": 4,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                },
                {
                    "id": 4,
                    "result": {
                        "profit": -62.27031420522076,
                        "orders": 8,
                        "barsCloseReversal": 4,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                },
                {
                    "id": 5,
                    "result": {
                        "profit": -14.140161070775292,
                        "orders": 4,
                        "barsCloseReversal": 4,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                },
                {
                    "id": 6,
                    "result": {
                        "profit": 22.02193518283894,
                        "orders": 7,
                        "barsCloseReversal": 4,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                }
            ]
        },
        "partialRange": 6
    }
    // WORK WITH PARTIAL RESULT
    let partialRange = input.partialRange;
    let partialResults = input.partialResult[instrument];

    let buildedObject = {};


    // build object for partial results
    partialResults.forEach(part=> {
        if(buildedObject[part.id])
        {
            buildedObject[part.id].results.push(part.result)
        }
        else {
            buildedObject[part.id] = {
                results : [part.result]
            }
        }
        
    })

       function getOccurrence(array, value) {
            var count = 0;
            array.forEach((v) => (v === value && count++));
            return count;
        }


    // maximize
    Object.keys(buildedObject).forEach(obj=>{
        buildedObject[obj].results = buildedObject[obj].results.sort((a, b) => a.profit - b.profit).reverse()
        if(buildedObject[obj].results.length > 10)
        {
            // take top 20 percentage
        }
   
        let arrayBarsClose = buildedObject[obj].results.map(el=> el.barsClose)
        let arrayBarsCloseReversal = buildedObject[obj].results.map(el => el.barsCloseReversal)
        let arrayBarsIgnore = buildedObject[obj].results.map(el => el.barsIgnore)
        let arrayBarsIgnoreClose = buildedObject[obj].results.map(el => el.barsIgnoreClose)
        let arrayProfitPercentage = buildedObject[obj].results.map(el => el.profitPercantage)  

        let setArrayBarsClose = Array.from(new Set(arrayBarsClose));
        let setArrayBarsCloseReversal = Array.from(new Set(arrayBarsCloseReversal));
        let setArrayBarsIgnore = Array.from(new Set(arrayBarsIgnore));
        let setArrayBarsIgnoreClose = Array.from(new Set(arrayBarsIgnoreClose));
        let setArrayProfitPercentage = Array.from(new Set(arrayProfitPercentage));

        let resultArrayBarsClose = setArrayBarsClose.map(el => { return { value: getOccurrence(arrayBarsClose, el), key: el, valuePercentage: getOccurrence(arrayBarsClose, el) / arrayBarsClose.length * 100 } })
        let resultArrayBarsCloseReversal = setArrayBarsCloseReversal.map(el => { return { value: getOccurrence(arrayBarsCloseReversal, el), key: el, valuePercentage: getOccurrence(arrayBarsCloseReversal, el) / arrayBarsCloseReversal.length * 100 } })
        let resultArrayBarsIgnore = setArrayBarsIgnore.map(el => { return { value: getOccurrence(arrayBarsIgnore, el), key: el, valuePercentage: getOccurrence(arrayBarsIgnore, el) / arrayBarsIgnore.length * 100 } })
        let resultArrayBarsIgnoreClose = setArrayBarsIgnoreClose.map(el => { return { value: getOccurrence(arrayBarsIgnoreClose, el), key: el, valuePercentage: getOccurrence(arrayBarsIgnoreClose, el) / arrayBarsIgnoreClose.length * 100 } })
        let resultArrayProfitPercentage = setArrayProfitPercentage.map(el => { return { value: getOccurrence(arrayProfitPercentage, el), key: el, valuePercentage: getOccurrence(arrayProfitPercentage, el) / arrayProfitPercentage.length * 100 } })

        console.log("RESULT" , resultArrayBarsClose ,  resultArrayBarsCloseReversal ,  resultArrayBarsIgnore  ,  resultArrayBarsIgnoreClose  ,  resultArrayProfitPercentage )

        buildedObject[obj].resultArrayBarsClose = resultArrayBarsClose;
        buildedObject[obj].resultArrayBarsCloseReversal = resultArrayBarsCloseReversal;
        buildedObject[obj].resultArrayBarsIgnore = resultArrayBarsIgnore;
        buildedObject[obj].resultArrayBarsIgnoreClose = resultArrayBarsIgnoreClose;
        buildedObject[obj].resultArrayProfitPercentage = resultArrayProfitPercentage;

       
    })
   
    



    

    console.log("BUILDED_OBJECT" ,  buildedObject)




    // EXAMPLE OUTPUT OBJECT

    {
            "1": {
                "results": [
                    {
                        "profit": 101.63937096867477,
                        "orders": 7,
                        "barsCloseReversal": 4,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    },
                    {
                        "profit": 101.63937096867477,
                        "orders": 7,
                        "barsCloseReversal": 0,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    },
                    {
                        "profit": 90.3580164909961,
                        "orders": 7,
                        "barsCloseReversal": 3,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    },
                    {
                        "profit": 90.3580164909961,
                        "orders": 7,
                        "barsCloseReversal": 2,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    },
                    {
                        "profit": 74.01703710494496,
                        "orders": 7,
                        "barsCloseReversal": 1,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                ],
                    "resultArrayBarsClose": [
                        {
                            "value": 5,
                            "key": 0,
                            "valuePercentage": 100
                        }
                    ],
                        "resultArrayBarsCloseReversal": [
                            {
                                "value": 1,
                                "key": 4,
                                "valuePercentage": 20
                            },
                            {
                                "value": 1,
                                "key": 0,
                                "valuePercentage": 20
                            },
                            {
                                "value": 1,
                                "key": 3,
                                "valuePercentage": 20
                            },
                            {
                                "value": 1,
                                "key": 2,
                                "valuePercentage": 20
                            },
                            {
                                "value": 1,
                                "key": 1,
                                "valuePercentage": 20
                            }
                        ],
                            "resultArrayBarsIgnore": [
                                {
                                    "value": 5,
                                    "key": 0,
                                    "valuePercentage": 100
                                }
                            ],
                                "resultArrayBarsIgnoreClose": [
                                    {
                                        "value": 5,
                                        "key": 0,
                                        "valuePercentage": 100
                                    }
                                ],
                                    "resultArrayProfitPercentage": [
                                        {
                                            "value": 5,
                                            "key": 0,
                                            "valuePercentage": 100
                                        }
                                    ]
            },
            "2": {
                "results": [
                    {
                        "profit": -207.31204788756693,
                        "orders": 8,
                        "barsCloseReversal": 4,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    },
                    {
                        "profit": -207.31204788756693,
                        "orders": 8,
                        "barsCloseReversal": 3,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    },
                    {
                        "profit": -207.31204788756693,
                        "orders": 8,
                        "barsCloseReversal": 2,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    },
                    {
                        "profit": -207.31204788756693,
                        "orders": 8,
                        "barsCloseReversal": 1,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    },
                    {
                        "profit": -207.31204788756693,
                        "orders": 8,
                        "barsCloseReversal": 0,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                ],
                    "resultArrayBarsClose": [
                        {
                            "value": 5,
                            "key": 0,
                            "valuePercentage": 100
                        }
                    ],
                        "resultArrayBarsCloseReversal": [
                            {
                                "value": 1,
                                "key": 4,
                                "valuePercentage": 20
                            },
                            {
                                "value": 1,
                                "key": 3,
                                "valuePercentage": 20
                            },
                            {
                                "value": 1,
                                "key": 2,
                                "valuePercentage": 20
                            },
                            {
                                "value": 1,
                                "key": 1,
                                "valuePercentage": 20
                            },
                            {
                                "value": 1,
                                "key": 0,
                                "valuePercentage": 20
                            }
                        ],
                            "resultArrayBarsIgnore": [
                                {
                                    "value": 5,
                                    "key": 0,
                                    "valuePercentage": 100
                                }
                            ],
                                "resultArrayBarsIgnoreClose": [
                                    {
                                        "value": 5,
                                        "key": 0,
                                        "valuePercentage": 100
                                    }
                                ],
                                    "resultArrayProfitPercentage": [
                                        {
                                            "value": 5,
                                            "key": 0,
                                            "valuePercentage": 100
                                        }
                                    ]
            },
            "3": {
                "results": [
                    {
                        "profit": 28.49377133805301,
                        "orders": 6,
                        "barsCloseReversal": 4,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    },
                    {
                        "profit": 28.49377133805301,
                        "orders": 6,
                        "barsCloseReversal": 3,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    },
                    {
                        "profit": 28.49377133805301,
                        "orders": 6,
                        "barsCloseReversal": 0,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    },
                    {
                        "profit": 26.25108010857764,
                        "orders": 6,
                        "barsCloseReversal": 2,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    },
                    {
                        "profit": 26.25108010857764,
                        "orders": 6,
                        "barsCloseReversal": 1,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                ],
                    "resultArrayBarsClose": [
                        {
                            "value": 5,
                            "key": 0,
                            "valuePercentage": 100
                        }
                    ],
                        "resultArrayBarsCloseReversal": [
                            {
                                "value": 1,
                                "key": 4,
                                "valuePercentage": 20
                            },
                            {
                                "value": 1,
                                "key": 3,
                                "valuePercentage": 20
                            },
                            {
                                "value": 1,
                                "key": 0,
                                "valuePercentage": 20
                            },
                            {
                                "value": 1,
                                "key": 2,
                                "valuePercentage": 20
                            },
                            {
                                "value": 1,
                                "key": 1,
                                "valuePercentage": 20
                            }
                        ],
                            "resultArrayBarsIgnore": [
                                {
                                    "value": 5,
                                    "key": 0,
                                    "valuePercentage": 100
                                }
                            ],
                                "resultArrayBarsIgnoreClose": [
                                    {
                                        "value": 5,
                                        "key": 0,
                                        "valuePercentage": 100
                                    }
                                ],
                                    "resultArrayProfitPercentage": [
                                        {
                                            "value": 5,
                                            "key": 0,
                                            "valuePercentage": 100
                                        }
                                    ]
            },
            "4": {
                "results": [
                    {
                        "profit": 26.28722948186469,
                        "orders": 8,
                        "barsCloseReversal": 1,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    },
                    {
                        "profit": -15.598624412881435,
                        "orders": 8,
                        "barsCloseReversal": 2,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    },
                    {
                        "profit": -62.27031420522076,
                        "orders": 8,
                        "barsCloseReversal": 4,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    },
                    {
                        "profit": -62.27031420522076,
                        "orders": 8,
                        "barsCloseReversal": 0,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    },
                    {
                        "profit": -64.35230604896404,
                        "orders": 8,
                        "barsCloseReversal": 3,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                ],
                    "resultArrayBarsClose": [
                        {
                            "value": 5,
                            "key": 0,
                            "valuePercentage": 100
                        }
                    ],
                        "resultArrayBarsCloseReversal": [
                            {
                                "value": 1,
                                "key": 1,
                                "valuePercentage": 20
                            },
                            {
                                "value": 1,
                                "key": 2,
                                "valuePercentage": 20
                            },
                            {
                                "value": 1,
                                "key": 4,
                                "valuePercentage": 20
                            },
                            {
                                "value": 1,
                                "key": 0,
                                "valuePercentage": 20
                            },
                            {
                                "value": 1,
                                "key": 3,
                                "valuePercentage": 20
                            }
                        ],
                            "resultArrayBarsIgnore": [
                                {
                                    "value": 5,
                                    "key": 0,
                                    "valuePercentage": 100
                                }
                            ],
                                "resultArrayBarsIgnoreClose": [
                                    {
                                        "value": 5,
                                        "key": 0,
                                        "valuePercentage": 100
                                    }
                                ],
                                    "resultArrayProfitPercentage": [
                                        {
                                            "value": 5,
                                            "key": 0,
                                            "valuePercentage": 100
                                        }
                                    ]
            },
            "5": {
                "results": [
                    {
                        "profit": -14.140161070775292,
                        "orders": 4,
                        "barsCloseReversal": 4,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    },
                    {
                        "profit": -14.140161070775292,
                        "orders": 4,
                        "barsCloseReversal": 3,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    },
                    {
                        "profit": -14.140161070775292,
                        "orders": 4,
                        "barsCloseReversal": 2,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    },
                    {
                        "profit": -14.140161070775292,
                        "orders": 4,
                        "barsCloseReversal": 1,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    },
                    {
                        "profit": -14.140161070775292,
                        "orders": 4,
                        "barsCloseReversal": 0,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                ],
                    "resultArrayBarsClose": [
                        {
                            "value": 5,
                            "key": 0,
                            "valuePercentage": 100
                        }
                    ],
                        "resultArrayBarsCloseReversal": [
                            {
                                "value": 1,
                                "key": 4,
                                "valuePercentage": 20
                            },
                            {
                                "value": 1,
                                "key": 3,
                                "valuePercentage": 20
                            },
                            {
                                "value": 1,
                                "key": 2,
                                "valuePercentage": 20
                            },
                            {
                                "value": 1,
                                "key": 1,
                                "valuePercentage": 20
                            },
                            {
                                "value": 1,
                                "key": 0,
                                "valuePercentage": 20
                            }
                        ],
                            "resultArrayBarsIgnore": [
                                {
                                    "value": 5,
                                    "key": 0,
                                    "valuePercentage": 100
                                }
                            ],
                                "resultArrayBarsIgnoreClose": [
                                    {
                                        "value": 5,
                                        "key": 0,
                                        "valuePercentage": 100
                                    }
                                ],
                                    "resultArrayProfitPercentage": [
                                        {
                                            "value": 5,
                                            "key": 0,
                                            "valuePercentage": 100
                                        }
                                    ]
            },
            "6": {
                "results": [
                    {
                        "profit": 22.02193518283894,
                        "orders": 7,
                        "barsCloseReversal": 4,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    },
                    {
                        "profit": 22.02193518283894,
                        "orders": 7,
                        "barsCloseReversal": 0,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    },
                    {
                        "profit": 19.521160149254154,
                        "orders": 7,
                        "barsCloseReversal": 3,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    },
                    {
                        "profit": 4.467267212540733,
                        "orders": 7,
                        "barsCloseReversal": 2,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    },
                    {
                        "profit": -13.778051026755954,
                        "orders": 7,
                        "barsCloseReversal": 1,
                        "cciLength": 0,
                        "cciValue": 0,
                        "barsClose": 0,
                        "barsIgnore": 0,
                        "barsIgnoreClose": 0,
                        "profitPercantage": 0,
                        "orderCall": "Both"
                    }
                ],
                    "resultArrayBarsClose": [
                        {
                            "value": 5,
                            "key": 0,
                            "valuePercentage": 100
                        }
                    ],
                        "resultArrayBarsCloseReversal": [
                            {
                                "value": 1,
                                "key": 4,
                                "valuePercentage": 20
                            },
                            {
                                "value": 1,
                                "key": 0,
                                "valuePercentage": 20
                            },
                            {
                                "value": 1,
                                "key": 3,
                                "valuePercentage": 20
                            },
                            {
                                "value": 1,
                                "key": 2,
                                "valuePercentage": 20
                            },
                            {
                                "value": 1,
                                "key": 1,
                                "valuePercentage": 20
                            }
                        ],
                            "resultArrayBarsIgnore": [
                                {
                                    "value": 5,
                                    "key": 0,
                                    "valuePercentage": 100
                                }
                            ],
                                "resultArrayBarsIgnoreClose": [
                                    {
                                        "value": 5,
                                        "key": 0,
                                        "valuePercentage": 100
                                    }
                                ],
                                    "resultArrayProfitPercentage": [
                                        {
                                            "value": 5,
                                            "key": 0,
                                            "valuePercentage": 100
                                        }
                                    ]
            }
        }






// TODO 



// maximize by profit(FRONTEND ? )
// take best percentage(10 - 20)(FRONTEND)
// use function and count best options(FRONTEND)



  //  input.partialResult[instrument].forEach()


        </script>
    
</body>
</html>